* evaluate all usages of loop and remove wherever possible
* use === in tests instead of ==
* translate if statements into if expressions (i.e. val x = if()else())